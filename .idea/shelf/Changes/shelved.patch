Index: app/Http/Controllers/xController.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nnamespace App\\Http\\Controllers;\r\n\r\nuse Illuminate\\Http\\Request;\r\nuse Illuminate\\Support\\Facades\\DB;\r\nuse Symfony\\Component\\HttpFoundation\\Session\\Session;\r\n\r\nclass xController extends Controller\r\n{\r\n    public function index()\r\n    {\r\n        $selectchars = DB::table('Character')\r\n            ->orderBy('Resets', 'desc')\r\n            ->paginate(5);\r\n        $selectguilds = DB::table('Guild')\r\n            ->orderBy('Resets', 'desc')\r\n            ->paginate(5);\r\n\r\n        // Top5 Characters\r\n        $topchars=\"\";\r\n        foreach($selectchars as $i=>$row)\r\n        {\r\n            // Class\r\n            $class = '';\r\n            $classsm = array(0,1,3,7);\r\n            $classbk = array(16,17,19,23);\r\n            $clasself = array(32,33,35,39);\r\n            $classmg = array(48,50,54);\r\n            $classdl = array(64,66,70);\r\n            $classsum = array(80,81,83,87);\r\n            $classrf = array(96,98,102);\r\n            $smicon = url('/images/sm-icon.png');\r\n            $bkicon = url('/images/bk-icon.png');\r\n            $elficon = url('/images/elf-icon.png');\r\n            $mgicon = url('/images/mg-icon.png');\r\n            $dlicon = url('/images/dl-icon.png');\r\n            $sumicon = url('/images/sum-icon.png');\r\n            $rficon = url('/images/rf-icon.png');\r\n\r\n            if(in_array($row -> Class, $classsm)){\r\n                $class = \"<img src='{$smicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classbk)){\r\n                $class = \"<img src='{$bkicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $clasself)){\r\n                $class = \"<img src='{$elficon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classmg)){\r\n                $class = \"<img src='{$mgicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classdl)){\r\n                $class = \"<img src='{$dlicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classsum)){\r\n                $class = \"<img src='{$sumicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classrf)){\r\n                $class = \"<img src='{$rficon}' alt=''>\";\r\n            }\r\n\r\n\r\n            // Top5 Characters variable\r\n            $topchars.='<tr>'.\r\n                ' <td>'.++$i.'</td>'.\r\n                '<td>'.$row -> Name.'</td>'.\r\n                '<td>'.$class.'</td>'.\r\n                '<td>'.$row -> Resets.'</td>'.\r\n\r\n                '</tr>';\r\n        }\r\n\r\n\r\n        // Top5 Characters\r\n        $topguilds=\"\";\r\n        foreach($selectguilds as $i=>$row)\r\n        {\r\n\r\n            // Top5 Guilds variable\r\n            $topguilds.='<tr>'.\r\n                ' <td>'.++$i.'</td>'.\r\n                '<td>'.$row -> G_Name.'</td>'.\r\n                '<td>'.$row -> G_Master.'</td>'.\r\n                '<td>'.$row -> Resets.'</td>'.\r\n\r\n                '</tr>';\r\n        }\r\n        // News in home\r\n        $news = DB::connection('XWEB')->table('XWEB_NEWS')\r\n            ->where('specific', '=', 'news')\r\n            ->paginate('5');\r\n\r\n        $events = DB::connection('XWEB')->table('XWEB_NEWS')\r\n            ->where('specific', '=', 'events')\r\n            ->paginate('5');\r\n\r\n        $updates = DB::connection('XWEB')->table('XWEB_NEWS')\r\n            ->where('specific', '=', 'updates')\r\n            ->paginate('5');\r\n\r\n\r\n        return view('index', ['topchars'=> $topchars , 'topguilds'=> $topguilds , 'news'=> $news , 'events'=> $events , 'updates'=> $updates]);\r\n    }\r\n\r\n    public function register()\r\n    {\r\n        return view('register');\r\n    }\r\n    public function login()\r\n    {\r\n        return view('login');\r\n    }\r\n    public function account_panel()\r\n    {\r\n        $data = ['UserInfo'=> DB::Table('MEMB_INFO')->where('memb___id', '=', session('User'))->first()];\r\n        return view('user.account-panel', $data);\r\n    }\r\n    public function download()\r\n    {\r\n        $mb = ['lite'=> DB::connection('XWEB')->Table('XWEB_DOWNLOAD')->where('version', '=', 'lite')->first('mb'),\r\n            'full'=> DB::connection('XWEB')->Table('XWEB_DOWNLOAD')->where('version', '=', 'full')->first('mb')];\r\n\r\n        $data = ['litelink'=> DB::connection('XWEB')->Table('XWEB_DOWNLOAD')->where('version', '=', 'lite')->get(),\r\n            'fulllink'=> DB::connection('XWEB')->Table('XWEB_DOWNLOAD')->where('version', '=', 'full')->get(),\r\n            'update'=> DB::connection('XWEB')->Table('XWEB_DOWNLOAD')->where('version', '=', 'update')->get()];\r\n        return view('download', $mb, $data);\r\n    }\r\n\r\n    public function ranking(Request $request)\r\n    {\r\n\r\n       // Select Character\r\n        $select = DB::table('Character')\r\n            ->orderBy('Resets', 'desc')\r\n            ->paginate(15);\r\n\r\n\r\n        // Search Ranking\r\n        $search = $request->input('search');\r\n        $searchby = $request->input('searchby');\r\n\r\n        if(isset($search))\r\n        {\r\n            $select = DB::table('Character')\r\n                ->Where('Name', 'LIKE', \"%{$search}%\")\r\n                ->paginate(15);\r\n\r\n        }\r\n        if(isset($searchby))\r\n        {\r\n            $select = DB::table('Character')\r\n                ->Where('Class', '=', \"{$searchby}\")\r\n                ->paginate(15);\r\n        }\r\n\r\n\r\n\r\n        // Output\r\n        $output=\"\";\r\n        foreach($select as $i=>$row)\r\n        {\r\n            // Class\r\n            $class = '';\r\n            $classsm = array(0,1,3,7);\r\n            $classbk = array(16,17,19,23);\r\n            $clasself = array(32,33,35,39);\r\n            $classmg = array(48,50,54);\r\n            $classdl = array(64,66,70);\r\n            $classsum = array(80,81,83,87);\r\n            $classrf = array(96,98,102);\r\n            $smicon = url('/images/sm-icon.png');\r\n            $bkicon = url('/images/bk-icon.png');\r\n            $elficon = url('/images/elf-icon.png');\r\n            $mgicon = url('/images/mg-icon.png');\r\n            $dlicon = url('/images/dl-icon.png');\r\n            $sumicon = url('/images/sum-icon.png');\r\n            $rficon = url('/images/rf-icon.png');\r\n\r\n            if(in_array($row -> Class, $classsm)){\r\n                $class = \"<img src='{$smicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classbk)){\r\n                $class = \"<img src='{$bkicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $clasself)){\r\n                $class = \"<img src='{$elficon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classmg)){\r\n                $class = \"<img src='{$mgicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classdl)){\r\n                $class = \"<img src='{$dlicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classsum)){\r\n                $class = \"<img src='{$sumicon}' alt=''>\";\r\n            }\r\n            if(in_array($row -> Class, $classrf)){\r\n                $class = \"<img src='{$rficon}' alt=''>\";\r\n            }\r\n\r\n\r\n            // Output variable\r\n            $output.='<tr>'.\r\n                ' <td>'.++$i.'</td>'.\r\n                '<td>'.$row -> Name.'</td>'.\r\n                '<td>'.$class.'</td>'.\r\n                '<td><img src=\"images/clan-icon.png\" alt=\"\"> Warriors</td>'.\r\n                '<td>'.$row -> Resets.'</td>'.\r\n\r\n                '</tr>';\r\n    }\r\n\r\n\r\n        return view('ranking' , ['output' => $output],['select'=> $select]);\r\n    }\r\n\r\n\r\n    public function news()\r\n    {\r\n        $news = DB::connection('XWEB')->table('XWEB_NEWS')\r\n            ->where('specific', '=', 'news')\r\n            ->paginate('5');\r\n\r\n        $events = DB::connection('XWEB')->table('XWEB_NEWS')\r\n            ->where('specific', '=', 'events')\r\n            ->paginate('5');\r\n\r\n        $updates = DB::connection('XWEB')->table('XWEB_NEWS')\r\n            ->where('specific', '=', 'updates')\r\n            ->paginate('5');\r\n\r\n        return view('news', ['news'=> $news, 'events'=> $events, 'updates'=> $updates]);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/Http/Controllers/xController.php b/app/Http/Controllers/xController.php
--- a/app/Http/Controllers/xController.php	(revision 4098358cb56ab1636f137874829202403df68f28)
+++ b/app/Http/Controllers/xController.php	(date 1669825134610)
@@ -2,6 +2,7 @@
 
 namespace App\Http\Controllers;
 
+use App\Models\XWEB_NEWS;
 use Illuminate\Http\Request;
 use Illuminate\Support\Facades\DB;
 use Symfony\Component\HttpFoundation\Session\Session;
@@ -87,8 +88,7 @@
                 '</tr>';
         }
         // News in home
-        $news = DB::connection('XWEB')->table('XWEB_NEWS')
-            ->where('specific', '=', 'news')
+        $news = XWEB_NEWS::where('specific', '=', 'news')
             ->paginate('5');
 
         $events = DB::connection('XWEB')->table('XWEB_NEWS')
